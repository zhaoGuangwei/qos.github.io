(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{479:function(s,t,n){"use strict";n.r(t);var a=n(42),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"存储"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#存储"}},[s._v("#")]),s._v(" 存储")]),s._v(" "),n("h2",{attrs:{id:"验证节点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#验证节点"}},[s._v("#")]),s._v(" 验证节点")]),s._v(" "),n("p",[s._v("验证节点存储结构如下：")]),s._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" Validator "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tOperatorAddress btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ValAddress "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"validator_address"`')]),s._v("\n\tOwner           btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AccAddress "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"owner"`')]),s._v("\n\tConsPubKey      crypto"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("PubKey     "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"consensus_pubkey"`')]),s._v("\n\tBondTokens      btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BigInt     "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"bond_tokens"`')]),s._v("\n\tDescription     Description       "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"description"`')]),s._v("\n\tCommission      Commission        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"commission"`')]),s._v("\n\n\tStatus         "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int8")]),s._v("         "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"status"`')]),s._v("\n\tInactiveCode   InactiveCode "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"inactive_code"`')]),s._v("\n\tInactiveTime   time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Time    "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"inactive_time"`')]),s._v("\n\tInactiveHeight "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"inactive_height"`')]),s._v("\n\n\tMinPeriod  "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"min_period"`')]),s._v("\n\tBondHeight "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"bond_height"`')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("验证节点投票窗口汇总信息：")]),s._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" ValidatorVoteInfo "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tStartHeight         "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"start_height"`')]),s._v("\n\tIndexOffset         "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"index_offset"`')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//统计截止高度=StartHeight+IndexOffset-1")]),s._v("\n\tMissedBlocksCounter "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"missed_blocks_counter"`')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("ul",[n("li",[s._v("验证节点信息： "),n("code",[s._v("0x01 + valAddress -> amino(Validator)")])]),s._v(" "),n("li",[s._v("验证节点地址与共识地址对应关系： "),n("code",[s._v("0x02 + consensusAddress -> amino(ValAddress)")])]),s._v(" "),n("li",[s._v("处于"),n("code",[s._v("inactive")]),s._v("状态的验证节点： "),n("code",[s._v("0x04 + inactiveTime + validatorAddress -> amino(inactiveTime)")])]),s._v(" "),n("li",[s._v("处于"),n("code",[s._v("active")]),s._v("状态的验证节点： "),n("code",[s._v("0x05 + votePower + validatorAddress -> amino(true)")])]),s._v(" "),n("li",[s._v("验证节点投票统计信息： "),n("code",[s._v("0x11 + validatorAddress -> amino(ValidatorVoteInfo)")])]),s._v(" "),n("li",[s._v("验证节点投票信息： "),n("code",[s._v("0x12 + validatorAddress + indenx -> amino(true/false)")])])]),s._v(" "),n("h2",{attrs:{id:"委托"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#委托"}},[s._v("#")]),s._v(" 委托")]),s._v(" "),n("p",[s._v("委托信息的存储结构如下：")]),s._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" DelegationInfo "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tDelegatorAddr btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AccAddress "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"delegator_addr"`')]),s._v("\n\tValidatorAddr btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ValAddress "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"validator_addr"`')]),s._v("\n\tAmount        btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BigInt     "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"delegate_amount"`')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 委托数量")]),s._v("\n\tIsCompound    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("bool")]),s._v("              "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"is_compound"`')]),s._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否复投")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("解除委托信息的存储结构如下:")]),s._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" UnbondingDelegationInfo "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tDelegatorAddr  btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AccAddress "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"delegator_addr"`')]),s._v("\n\tValidatorAddr  btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ValAddress "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"validator_addr"`')]),s._v("\n\tHeight         "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v("             "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"height"`')]),s._v("\n\tCompleteHeight "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v("             "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"complete_height"`')]),s._v("\n\tAmount         btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BigInt     "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"delegate_amount"`')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("转委托信息的存储结构如下：")]),s._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" RedelegationInfo "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("struct")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\tDelegatorAddr  btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("AccAddress "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"delegator_addr"`')]),s._v("\n\tFromValidator  btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ValAddress "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"from_validator"`')]),s._v("\n\tToValidator    btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ValAddress "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"to_validator"`')]),s._v("\n\tAmount         btypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("BigInt     "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"delegate_amount"`')]),s._v("\n\tHeight         "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v("             "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"height"`')]),s._v("\n\tCompleteHeight "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("int64")]),s._v("             "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"complete_height"`')]),s._v("\n\tIsCompound     "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("bool")]),s._v("              "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('`json:"is_compound"`')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 是否复投")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("ul",[n("li",[s._v("委托信息： "),n("code",[s._v("0x31 + delegatorAddress + validatorAddress -> amino(DelegationInfo)")])]),s._v(" "),n("li",[s._v("验证节点与委托账户记录： "),n("code",[s._v("0x32 + validatorAddress + delegatorAddress -> amino(true)")])]),s._v(" "),n("li",[s._v("解绑信息： "),n("code",[s._v("0x41 + height + delegatorAddress + validatorAddress -> amino(UnbondingDelegationInfo)")])]),s._v(" "),n("li",[s._v("解绑信息： "),n("code",[s._v("0x42 + delegatorAddress + height + validatorAddress -> amino(true)")])]),s._v(" "),n("li",[s._v("解绑信息： "),n("code",[s._v("0x43 + validatorAddress + height + delegatorAddress -> amino(true)")])]),s._v(" "),n("li",[s._v("转委托信息： "),n("code",[s._v("0x51 + height + delegatorAddress + validatorAddress -> amino(RedelegationInfo)")])]),s._v(" "),n("li",[s._v("转委托信息： "),n("code",[s._v("0x52 + delegatorAddress + height + validatorAddress -> amino(true)")])]),s._v(" "),n("li",[s._v("转委托信息： "),n("code",[s._v("0x53 + validatorAddress + height + delegatorAddress -> amino(true)")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);